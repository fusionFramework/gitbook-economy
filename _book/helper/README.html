<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <title>Helper | Economy</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.0.3">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    
    <link rel="next" href="../user_items/README.html" />
    
    
    <link rel="prev" href="../commands/create_your_own.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book"  data-level="3" data-basepath=".." data-revision="1412420722870">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="items/README.html">
            
                
                    <a href="../items/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         Items
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="commands/README.html">
            
                
                    <a href="../commands/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         Commands
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.1" data-path="commands/bundled.html">
            
                
                    <a href="../commands/bundled.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                         Bundled
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.2" data-path="commands/create_your_own.html">
            
                
                    <a href="../commands/create_your_own.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                         Create your own
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter active" data-level="3" data-path="helper/README.html">
            
                
                    <a href="../helper/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         Helper
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="user_items/README.html">
            
                
                    <a href="../user_items/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         User items
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="4.1" data-path="user_items/stacks.html">
            
                
                    <a href="../user_items/stacks.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                         Stacks
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.2" data-path="user_items/move_em_around.html">
            
                
                    <a href="../user_items/move_em_around.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                         Move &#39;em around
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="npcs/README.html">
            
                
                    <a href="../npcs/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         NPCs
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="5.1" data-path="npcs/use.html">
            
                
                    <a href="../npcs/use.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                         Use
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.2" data-path="npcs/create_your_own.html">
            
                
                    <a href="../npcs/create_your_own.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                         Create your own
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Economy</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_9239">
                    
                        <h1 id="item-helper">Item helper</h1>
<p>The item helper aims to make it easier for the developer to look for and give out items.</p>
<p>Most of the time you start of by calling the factory method which takes 1 argument.
This argument is either the item&#39;s id (in this case <code>Model_Item</code> will look for an existing item) or a loaded Model_Item instance:</p>
<pre><code class="lang-php"><span class="hljs-comment">// Load the item with id 1</span>
<span class="hljs-variable">$helper</span> = Item::factory(<span class="hljs-number">1</span>);

<span class="hljs-comment">// Load the item through a Model_Item instance</span>
<span class="hljs-variable">$item</span> = ORM::Factory(<span class="hljs-string">'Item'</span>)
    <span class="hljs-variable">-&gt;where</span>(<span class="hljs-string">'name'</span>, <span class="hljs-string">'='</span>, <span class="hljs-string">'Apple'</span>)
    <span class="hljs-variable">-&gt;find</span>();
<span class="hljs-variable">$helper</span> = Item::factory(<span class="hljs-variable">$item</span>);
</code></pre>
<blockquote>
<p>This will throw an <code>Item_Exception_Load</code> if an error occurs.</p>
</blockquote>
<p>Now that you&#39;ve provided the item helper with an item we can start having some fun.</p>
<p>As a little note, you can always access the loaded Model_Item from the helper like this:</p>
<pre><code>    $item = $helper-&gt;item();
</code></pre><h2 id="giving-the-item-to-a-user">Giving the item to a user</h2>
<p>At some point in your game you might want to give the user items after doing something (playing a mini-game, quests,...),
this method is designed for that. It also automatically logs this action if it&#39;s done successfully (the log gets returned on success).</p>
<h3 id="parameters">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>$user</td>
<td>null if you want to send it to the logged in user, and id or ModelUser instance otherwise</td>
</tr>
<tr>
<td>$origin</td>
<td>Where is this transaction happening (for logs)</td>
</tr>
<tr>
<td>$amount</td>
<td>How many copies does the user get (defaults to 1)</td>
</tr>
<tr>
<td>$location</td>
<td>Where are we sending the items to? (defaults to inventory)</td>
</tr>
<tr>
<td>$ignore_limit</td>
<td>Ignore the space limit of that location? (defaults to false), can be handy when sending rewards</td>
</tr>
</tbody>
</table>
<h3 id="exceptions">Exceptions</h3>
<table>
<thead>
<tr>
<th>Class thrown</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Item_Exception_Amount</td>
<td>When an invalid or negative number is specific for $amount parameter</td>
</tr>
<tr>
<td>Item_Exception_User</td>
<td>When no user can be loaded</td>
</tr>
<tr>
<td>Item_Exception_Space</td>
<td>When the user hit the space limit for $location</td>
</tr>
<tr>
<td>Item_Exception</td>
<td>A catch-all exception if you just want to catch 1 exception)</td>
</tr>
</tbody>
</table>
<h3 id="examples">Examples</h3>
<p>Now, let&#39;s say the logged in user wins an 3 copies of an item in daily. If the user&#39;s inventory is full we&#39;d still want to give him the winnings:</p>
<pre><code class="lang-php"><span class="hljs-variable">$log</span> = <span class="hljs-variable">$helper</span><span class="hljs-variable">-&gt;to_user</span>(<span class="hljs-keyword">null</span>, <span class="hljs-string">'daily'</span>, <span class="hljs-number">3</span>, <span class="hljs-string">'inventory'</span>, <span class="hljs-keyword">true</span>);
</code></pre>
<p>Now let&#39;s say the user buys an item from a store, if he does not have any space left in his inventory we won&#39;t go through with the sale:</p>
<pre><code class="lang-php"><span class="hljs-keyword">try</span> {
    <span class="hljs-variable">$log</span> = <span class="hljs-variable">$helper</span><span class="hljs-variable">-&gt;to_user</span>(<span class="hljs-keyword">null</span>, <span class="hljs-string">'store'</span>, <span class="hljs-number">1</span>);

    <span class="hljs-comment">// Seems to go through successful</span>
}
<span class="hljs-keyword">catch</span>(Item_Exception_Space <span class="hljs-variable">$e</span>)
{
    <span class="hljs-comment">//seems like there's no space in the inventory to place the item, return an error</span>
}
</code></pre>
<p>Let&#39;s do the same but account for all the exceptions that this method could throw and set them as <code>RD</code> warnings:</p>
<pre><code class="lang-php"><span class="hljs-keyword">try</span> {
    <span class="hljs-variable">$log</span> = <span class="hljs-variable">$helper</span><span class="hljs-variable">-&gt;to_user</span>(<span class="hljs-keyword">null</span>, <span class="hljs-string">'store'</span>, <span class="hljs-number">1</span>);
    RD::success(<span class="hljs-string">'Thanks for buying :$item_name'</span>, [<span class="hljs-string">':item_name'</span> =&gt; <span class="hljs-variable">$helper</span><span class="hljs-variable">-&gt;item</span>()<span class="hljs-variable">-&gt;name</span>]);
}
<span class="hljs-keyword">catch</span>(Item_Exception_Amount <span class="hljs-variable">$e</span>)
{
    RD::warning(<span class="hljs-string">'The provided amount is incorrect'</span>);
}
<span class="hljs-keyword">catch</span>(Item_Exception_User <span class="hljs-variable">$e</span>)
{
    <span class="hljs-comment">// In this case it would only be fired if no user is logged in</span>
    RD::warning(<span class="hljs-string">'You need to be logged in to buy an item'</span>);
}
<span class="hljs-keyword">catch</span>(Item_Exception_Space <span class="hljs-variable">$e</span>)
{
    RD::warning(<span class="hljs-string">'You have no more space left in your inventory'</span>);
}
</code></pre>
<h2 id="check-if-the-user-has-the-item">Check if the user has the item</h2>
<p>Sometimes it&#39;s necesary to check if the user an item (for example during a quest).
If this method is run successfully it will return the user item, otherwise it will return false.</p>
<h3 id="parameters">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>$amount</td>
<td>How many copies does the user need to have of this item? (defaults to 1)</td>
<td></td>
</tr>
<tr>
<td>$location</td>
<td>Where are should the item be located? (defaults to inventory)</td>
</tr>
<tr>
<td>$user</td>
<td>null if you want to check the logged in user, otherwise an id or ModelUser instance</td>
</tr>
</tbody>
</table>
<h3 id="exceptions">Exceptions</h3>
<table>
<thead>
<tr>
<th>Class thrown</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Item_Exception_Amount</td>
<td>When an invalid or negative number is specific for $amount</td>
</tr>
<tr>
<td>Item_Exception_User</td>
<td>When no user can be loaded</td>
</tr>
<tr>
<td>Item_Exception</td>
<td>A catch-all exception if you just want to catch 1 exception)</td>
</tr>
</tbody>
</table>
<h3 id="examples">Examples</h3>
<p>So let&#39;s get down to buisines and check if the logged in user has at least 1 copy ofthe item in his inventory:</p>
<pre><code class="lang-php"><span class="hljs-variable">$item</span> = <span class="hljs-variable">$helper</span><span class="hljs-variable">-&gt;user_has</span>();

<span class="hljs-keyword">if</span>(<span class="hljs-variable">$item</span> == <span class="hljs-keyword">FALSE</span>)
{
    <span class="hljs-comment">// Nope, user does not have it</span>
}
<span class="hljs-keyword">else</span>
{
    <span class="hljs-comment">// Yup the user has it, let's echo the amount of copies he has.</span>
    <span class="hljs-keyword">echo</span> <span class="hljs-variable">$item</span><span class="hljs-variable">-&gt;amount</span>;
}
</code></pre>
<p>Now let&#39;s check if he has 3 copies in his safe, this time we&#39;ll also check for exceptions:</p>
<pre><code class="lang-php"><span class="hljs-keyword">try</span> {
    <span class="hljs-variable">$item</span> = <span class="hljs-variable">$helper</span><span class="hljs-variable">-&gt;user_has</span>(<span class="hljs-number">3</span>, <span class="hljs-string">'safe'</span>);

    <span class="hljs-keyword">if</span>(<span class="hljs-variable">$item</span> == <span class="hljs-keyword">FALSE</span>)
    {
        <span class="hljs-comment">// Nope, user does not have it</span>
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-comment">// Yup the user has it, let's echo the amount of copies he has.</span>
        <span class="hljs-keyword">echo</span> <span class="hljs-variable">$item</span><span class="hljs-variable">-&gt;amount</span>;
    }
}
<span class="hljs-keyword">catch</span>(Item_Exception_Amount <span class="hljs-variable">$e</span>)
{
    RD::warning(<span class="hljs-string">'The provided amount is incorrect'</span>);
}
<span class="hljs-keyword">catch</span>(Item_Exception_User <span class="hljs-variable">$e</span>)
{
    <span class="hljs-comment">// In this case it would only be fired if no user is logged in</span>
    RD::error(<span class="hljs-string">'No one seems to be logged in!'</span>);
}
</code></pre>
<h2 id="how-check-if-the-user-has-several-items-at-once">How check if the user has several items at once</h2>
<p>This static helper method tries to retrieve a set of items based on the provide item&#39;s id.</p>
<p>It does not guarantee that he user has all of them, it will return an array for you to loop over and check yourself,
it just simplifies finding them.</p>
<p>It will return an array, if an item was found it will be added to the array
(the key will be the same as the item&#39;s id, the value will be a loaded <code>Model_User_Item</code> instance).</p>
<h3 id="parameters">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>$item_ids</td>
<td>An array with item&#39;s id</td>
</tr>
<tr>
<td>$location</td>
<td>Where are should the item be located? (defaults to inventory)</td>
</tr>
<tr>
<td>$user</td>
<td>Which user to load the items from (defaults to logged in user)</td>
</tr>
</tbody>
</table>
<h3 id="exceptions">Exceptions</h3>
<table>
<thead>
<tr>
<th>Class thrown</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Item_Exception_User</td>
<td>When no user can be loaded</td>
</tr>
<tr>
<td>Item_Exception</td>
<td>A catch-all exception if you just want to catch 1 exception)</td>
</tr>
</tbody>
</table>
<h3 id="examples">Examples</h3>
<p>Let&#39;s say we want to check if the loged in user has 3 items in his inventory, these item&#39;s id are 1, 5 and 12:</p>
<pre><code class="lang-php"><span class="hljs-variable">$items</span> = Item::retrieve([<span class="hljs-number">1</span>,<span class="hljs-number">5</span>,<span class="hljs-number">12</span>]);

<span class="hljs-comment">// let's see if they're found seperately:</span>

<span class="hljs-keyword">if</span>(array_key_exists(<span class="hljs-number">1</span>, <span class="hljs-variable">$items</span>))
{
    <span class="hljs-comment">//item with id 1 was found</span>
}
<span class="hljs-keyword">if</span>(array_key_exists(<span class="hljs-number">5</span>, <span class="hljs-variable">$items</span>))
{
    <span class="hljs-comment">//item with id 5 was found</span>
}
<span class="hljs-keyword">if</span>(array_key_exists(<span class="hljs-number">1</span>, <span class="hljs-variable">$items</span>))
{
    <span class="hljs-comment">//item with id 12 was found</span>
}
</code></pre>
<p>Now let&#39;s do it properly and check for errors</p>
<pre><code class="lang-php"><span class="hljs-keyword">try</span> {
    <span class="hljs-variable">$item_ids</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">5</span>,<span class="hljs-number">12</span>];
    <span class="hljs-variable">$items</span> = Item::retrieve(<span class="hljs-variable">$item_ids</span>);

    <span class="hljs-keyword">if</span>(count(<span class="hljs-variable">$items</span>) == count(<span class="hljs-variable">$item_ids</span>)
    {
        <span class="hljs-comment">// All items were found</span>
    }
    <span class="hljs-comment">// Some were found</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(count(<span class="hljs-variable">$items</span>) &gt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-comment">// echo the name of the items that were found</span>
        <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$items</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$id</span> =&gt; <span class="hljs-variable">$item</span>)
        {
            <span class="hljs-keyword">echo</span> <span class="hljs-variable">$item</span><span class="hljs-variable">-&gt;item</span><span class="hljs-variable">-&gt;name</span> . <span class="hljs-string">' was found'</span>;
        }
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-comment">// No matching items were found in the user's inventory</span>
    }
}
<span class="hljs-keyword">catch</span>(Item_Exception_User <span class="hljs-variable">$e</span>)
{
    <span class="hljs-comment">// User wasn't loaded</span>
}
</code></pre>
<h2 id="how-to-retrieve-items-by-location">How to retrieve items by location</h2>
<p>This static helper method prepares a database query for you, you will still need to do the final <code>-&gt;find_all()</code> on it.
It should give you a chance to pass the query on to a <code>Paginate</code> object or manipulate it before executing it.</p>
<h3 id="parameters">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>$location</td>
<td>Where are should the item be located? (defaults to inventory)</td>
</tr>
<tr>
<td>$transferable_check</td>
<td>Only load items that are transferable? (defaults to FALSE)</td>
</tr>
<tr>
<td>$parameter_id</td>
<td>Specifify a parameter_id value (defaults to null</td>
</tr>
<tr>
<td>$user</td>
<td>Which user to load the items from</td>
</tr>
</tbody>
</table>
<h3 id="exceptions">Exceptions</h3>
<table>
<thead>
<tr>
<th>Class thrown</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Item_Exception_User</td>
<td>When no user can be loaded</td>
</tr>
<tr>
<td>Item_Exception</td>
<td>A catch-all exception if you just want to catch 1 exception)</td>
</tr>
</tbody>
</table>
<h3 id="examples">Examples</h3>
<p>Let&#39;s retrieve all the items from the logged in user&#39;s inventory, if we found items we&#39;ll loop and display the item&#39;s names:</p>
<pre><code class="lang-php"><span class="hljs-variable">$items</span> = Item::location(<span class="hljs-string">'inventory'</span>)
    <span class="hljs-variable">-&gt;find_all</span>();

<span class="hljs-keyword">if</span>(count(<span class="hljs-variable">$items</span>) &gt; <span class="hljs-number">0</span>)
{
    <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$items</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$item</span>)
    {
        <span class="hljs-keyword">echo</span> <span class="hljs-variable">$item</span><span class="hljs-variable">-&gt;name</span>() . <span class="hljs-string">'&lt;br /&gt;'</span>;
    }
}
</code></pre>
<p>Now let&#39;s do the same, but paginate them with a maximum of 25 items per page:</p>
<pre><code class="lang-php"><span class="hljs-variable">$items</span> = Item::location(<span class="hljs-string">'inventory'</span>);

<span class="hljs-variable">$paginate</span> = Paginate::factory(<span class="hljs-variable">$items</span>, [<span class="hljs-string">'total_items'</span> =&gt; <span class="hljs-number">25</span>])
    <span class="hljs-variable">-&gt;execute</span>();

<span class="hljs-variable">$pagination_menu</span> = <span class="hljs-variable">$paginate</span><span class="hljs-variable">-&gt;render</span>();
<span class="hljs-variable">$list</span> = <span class="hljs-variable">$paginate</span><span class="hljs-variable">-&gt;result</span>();

<span class="hljs-comment">// Print the pagination menu</span>
<span class="hljs-keyword">echo</span> <span class="hljs-variable">$pagination</span> . <span class="hljs-string">'&lt;br /&gt;'</span>;

<span class="hljs-comment">// Echo the item names</span>
<span class="hljs-keyword">if</span>(count(<span class="hljs-variable">$items</span>) &gt; <span class="hljs-number">0</span>)
{
    <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$items</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$item</span>)
    {
        <span class="hljs-keyword">echo</span> <span class="hljs-variable">$item</span><span class="hljs-variable">-&gt;name</span>() . <span class="hljs-string">'&lt;br /&gt;'</span>;
    }
}
</code></pre>
<p>Let&#39;s say we want to create a trade and show all items that the user has in his inventory, we&#39;d only want to show
items that are transferable:</p>
<pre><code class="lang-php"><span class="hljs-variable">$items</span> = Item::location(<span class="hljs-string">'inventory'</span>, <span class="hljs-keyword">TRUE</span>)
    <span class="hljs-variable">-&gt;find_all</span>();

<span class="hljs-keyword">if</span>(count(<span class="hljs-variable">$items</span>) &gt; <span class="hljs-number">0</span>)
{
    <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$items</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$item</span>)
    {
        <span class="hljs-keyword">echo</span> <span class="hljs-variable">$item</span><span class="hljs-variable">-&gt;name</span>() . <span class="hljs-string">'&lt;br /&gt;'</span>;
    }
}
</code></pre>
<p>Now let&#39;s say we have a trade and we want to show all the items in a lot.
These would all be located in <code>trade.lot</code>, all items in trade lots are located here, parameter_id specifies in which trade they would be located.</p>
<p>Let&#39;s locate all items for the trade lot with 1 as its id (these items should be transferable of course):</p>
<pre><code class="lang-php"><span class="hljs-variable">$items</span> = Item::location(<span class="hljs-string">'trade.lot'</span>, <span class="hljs-keyword">TRUE</span>, <span class="hljs-number">1</span>)
    <span class="hljs-variable">-&gt;find_all</span>();

<span class="hljs-keyword">if</span>(count(<span class="hljs-variable">$items</span>) &gt; <span class="hljs-number">0</span>)
{
    <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$items</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$item</span>)
    {
        <span class="hljs-keyword">echo</span> <span class="hljs-variable">$item</span><span class="hljs-variable">-&gt;name</span>() . <span class="hljs-string">'&lt;br /&gt;'</span>;
    }
}
</code></pre>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../commands/create_your_own.html" class="navigation navigation-prev " aria-label="Previous page: Create your own"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../user_items/README.html" class="navigation navigation-next " aria-label="Next page: User items"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
